# PCVCS Data and Experiment Notes

This repository includes generated experiment JSON files under `data/`.
The key point is:

- `scenario_*_events.json` files are produced by running SUMO through TraCI plus project-side post-processing.
- They are not raw SUMO export files.

## Data file origins

### 1. `data/scenario_*_events.json`

Generated by:

- `experiments/modules/end_to_end_simulator.py`

Flow:

1. Build trips file `sumo/trips_{vehicle_count}v.trips.xml`.
2. Run `sim/run_sumo_traci.py` with:
   - `--cfg <sumo config>`
   - `--out data/scenario_{scenario_name}_events.json`
   - `--collect-metrics`
3. `sim/run_sumo_traci.py` steps SUMO (`traci.simulationStep()`), collects vehicle metrics, and appends project-defined event records (`token`, `lat`, `lon`, `geohash7`, `timestamp`).
4. Save JSON output to the requested `--out` path.

So each `scenario_*_events.json` contains:

- `rsus`: generated RSU key material metadata
- `events`: protocol-level event records generated during simulation windows
- `metrics`: per-step TraCI vehicle metrics (when `--collect-metrics` is enabled)

### 2. `data/rsu_events.json`

Default output path of `sim/run_sumo_traci.py` when `--out` is not provided.

If an experiment runner passes `--out`, that custom path is used instead (usually `data/scenario_*_events.json`).

## Default road network used by current experiment pipeline

The default end-to-end simulator config is:

- `sumo/simple_test.cfg`

That SUMO config loads:

- `sumo/simple_grid.net.xml`

So the checked-in `scenario_*_events.json` files from the default pipeline are based on the grid network, not the Shanghai OSM network.

## About the Shanghai network files

Shanghai network assets are present under `sumo_real_small/` (for example `shanghai.net.xml`), but they are not wired into the default end-to-end experiment path unless you change the SUMO config/arguments.

## Related output directories

In addition to `data/`, some scripts write summarized outputs to timestamped directories such as:

- `experiment_results/<timestamp>/...`
- `performance_evaluation_results/<timestamp>/...`
- `new_experiment_results/<timestamp>/...`

These directories store aggregated result JSON, plots, and reports, while `data/` contains core event-level simulation artifacts used by multiple experiment modules.
